---
page_title: "scp_redis_cluster Resource - scp"
subcategory: ""
description: |-
  
---

# Resource: scp_redis_cluster




## Example Usage

```terraform
data "scp_region" "region" {
  filter {
    name = "location"
    values = ["KR-WEST-2"]
  }
}

data "scp_obs_storages" "obs_storage" {
  service_zone_id     = data.scp_region.region.id
  object_storage_name = "demo_object_storage_name"
}

data "scp_standard_image" "redis_cluster_7_2_image" {
  service_group = "DATABASE"
  service       = "Redis"
  region        = data.scp_region.region.location

  filter {
    name   = "image_name"
    values = ["Redis Cluster 7.2.0"]
  }
}

resource "scp_redis_cluster" "demo_db" {
  subnet_id = "SUBNET-12345678"
  security_group_ids = ["FIREWALL_SECURITY_GROUP-12345678", "FIREWALL_SECURITY_GROUP-87654321"]
  service_zone_id = "ZONE-12345678"

  redis_servers = [
    {
      redis_server_name = "terraabc-01"
      nat_public_ip_id = null
      server_role_type = "MASTER"
    },
    {
      redis_server_name = "terraabc-02"
      nat_public_ip_id = null
      server_role_type = "MASTER"
    },
    {
      redis_server_name = "terraabc-03"
      nat_public_ip_id = null
      server_role_type = "MASTER"
    },
    {
      redis_server_name = "terraabc-04"
      nat_public_ip_id = null
      server_role_type = "REPLICA"
    },
    {
      redis_server_name = "terraabc-05"
      nat_public_ip_id = null
      server_role_type = "REPLICA"
    },
    {
      redis_server_name = "terraabc-06"
      nat_public_ip_id = null
      server_role_type = "REPLICA"
    }
  ]


  image_id = data.scp_standard_image.redis_cluster_7_2_image.id
  contract_period = "1 Year"
  next_contract_period = "None"
  nat_enabled = false
  redis_cluster_name = "democluster"
  redis_cluster_state = "RUNNING"

  database_port = 6378
  database_user_password = ""

  shards_count = 3
  shards_replica_count = 1

  encryption_enabled = true
  server_type = "redis1v1m2"
  timezone = "Asia/Seoul"

  block_storages = [
    {
      block_storage_role_type = "DATA"
      block_storage_type = "SSD"
      block_storage_size = 50
    }
  ]

  backup = [
    {
      object_storage_id = "S3OBJECTSTORAGE-12345678"
      backup_retention_period = "15D"
      backup_start_hour = 7
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `block_storages` (Block List, Min: 1) block storage. (It can't be deleted.) (see [below for nested schema](#nestedblock--block_storages))
- `contract_period` (String) Contract (None|1 Year|3 Year)
- `database_user_password` (String, Sensitive) User account password of database.
- `encryption_enabled` (Boolean) Whether to use storage encryption.
- `image_id` (String) Redis Cluster virtual server image id.
- `redis_cluster_name` (String) Name of database cluster. (3 to 20 characters only)
- `redis_cluster_state` (String) Redis Cluster state (RUNNING|STOPPED)
- `redis_servers` (Block List, Min: 1) RedisCluster servers (see [below for nested schema](#nestedblock--redis_servers))
- `security_group_ids` (List of String) Security-Group ids of this redisCluster DB. Each security-group must be a valid security-group resource which is attached to the VPC.
- `server_type` (String) Server type.
- `service_zone_id` (String) Service Zone Id
- `subnet_id` (String) Subnet id of this database server. Subnet must be a valid subnet resource which is attached to the VPC.
- `timezone` (String) Timezone setting of this database.

### Optional

- `backup` (Block Set, Max: 1) (see [below for nested schema](#nestedblock--backup))
- `database_port` (Number) Port number of this database. (1024 to 65535)
- `nat_enabled` (Boolean) Whether to use nat.
- `next_contract_period` (String) Next contract (None|1 Year|3 Year)
- `shards_count` (Number) Number of Masters.
- `shards_replica_count` (Number) Number of Replicas created per Master.
- `tags` (Map of String)
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `id` (String) The ID of this resource.
- `vpc_id` (String) vpc id

<a id="nestedblock--block_storages"></a>
### Nested Schema for `block_storages`

Required:

- `block_storage_size` (Number) Block Storage Size (50 to 5120)
- `block_storage_type` (String) Storage product name. (SSD|HDD)

Optional:

- `block_storage_role_type` (String) Storage usage. (Only DATA)

Read-Only:

- `block_storage_group_id` (String) Block storage group id


<a id="nestedblock--redis_servers"></a>
### Nested Schema for `redis_servers`

Required:

- `redis_server_name` (String) RedisCluster database server names. (3 to 20 lowercase and number with dash and the first character should be an lowercase letter.)
- `server_role_type` (String) Server role type Enter 'MASTER' for a single server configuration. (MASTER | REPLICA)",

Optional:

- `nat_public_ip_id` (String) Public IP for NAT. If it is null, it is automatically allocated.

Read-Only:

- `nat_ip_address` (String) nat ip address


<a id="nestedblock--backup"></a>
### Nested Schema for `backup`

Required:

- `backup_retention_period` (String) Backup File Retention Day.(7D <= day <= 35D)
- `backup_start_hour` (Number) The time at which the backup starts. (from 0 to 23)

Optional:

- `object_storage_id` (String) Object storage ID where backup files will be stored.


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `update` (String)
