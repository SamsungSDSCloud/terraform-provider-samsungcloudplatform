---
page_title: "scp_lb_server_group Resource - scp"
subcategory: ""
description: |-
  Provides a Load Balancer Server Group resource.
---

# Resource: scp_lb_server_group

Provides a Load Balancer Server Group resource.


## Example Usage

```terraform
resource "scp_lb_server_group" "my_lb_server_group_http" {
  lb_id     = data.terraform_remote_state.load_balancer.outputs.id
  name      = "${var.name}-http"
  algorithm = "ROUND_ROBIN"

  server_group_member {
    join_state  = "ENABLED"
    object_type = "INSTANCE"
    object_id   = data.terraform_remote_state.virtual_server.outputs.id
    object_port = 8116
    weight      = 2
  }

  monitor_protocol     = "HTTP"
  monitor_port         = 8020
  monitor_interval_sec = 30
  monitor_timeout_sec  = 30
  monitor_count        = 30

  monitor_http_method        = "POST"
  monitor_http_version       = "1.1"
  monitor_http_url           = "/health-check-post"
  monitor_http_request_body  = "TestPost1"
  monitor_http_response_body = "TestPost2"
}

resource "scp_lb_server_group" "my_lb_server_group_tcp" {
  lb_id     = "LB-xxxxxxx"
  name      = "${var.name}-tcp"
  algorithm = "LEAST_CONNECTION"

  server_group_member {
    join_state  = "ENABLED"
    object_type = "INSTANCE"
    object_id   = data.terraform_remote_state.virtual_server.outputs.id
    object_port = 8117
    weight      = 10
  }

  monitor_protocol     = "TCP"
  monitor_port         = 8020
  monitor_interval_sec = 30
  monitor_timeout_sec  = 30
  monitor_count        = 30
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `algorithm` (String) Balancing algorithm. (ROUND_ROBIN, WEIGHTED_ROUND_ROBIN, LEAST_CONNECTION, WEIGHTED_LEAST_CONNECTION, IP_HASH)
- `lb_id` (String) Load-Balancer id
- `monitor_count` (Number) Monitor count
- `monitor_interval_sec` (Number) Monitor interval time(s)
- `monitor_port` (Number) Monitor port
- `monitor_protocol` (String) Monitor protocol
- `monitor_timeout_sec` (Number) Monitor timeout second
- `name` (String) Load-Balancer server group name. (3 to 20 characters with dash in middle)

### Optional

- `monitor_http_method` (String) Monitor http method. (Only HTTP monitor_protocol. GET, POST)
- `monitor_http_request_body` (String) Request body content. (Only POST monitor_http_method. 0 to 300 byte characters)
- `monitor_http_response_body` (String) Response body content. (Only HTTP monitor_protocol. 0 to 300 byte characters)
- `monitor_http_url` (String) Monitor http url path. (Only HTTP monitor_protocol. 0 to 50 alpha-numeric characters with period, dash, underscore)
- `monitor_http_version` (String) Monitor http version. (Only HTTP monitor_protocol. 1.0, 1.1)
- `server_group_member` (Block List) Server-Group members (see [below for nested schema](#nestedblock--server_group_member))
- `tags` (Map of String)

### Read-Only

- `id` (String) The ID of this resource.
- `monitor_id` (String) Monitor id

<a id="nestedblock--server_group_member"></a>
### Nested Schema for `server_group_member`

Required:

- `join_state` (String) Target service joining state. (ENABLED, DISABLED, GRACEFUL_DISABLED)
- `object_type` (String) Target object type. (INSTANCE, BAREMETAL, MANUAL)
- `weight` (Number) Balancing weight. This is used with when weighted algorithm is set. (1 to 256)

Optional:

- `object_id` (String) Target object id (VM server or BareMetal server). This can not be set with 'object_ipv4'. Input resource should be in the same VPC.
- `object_ip_address` (String) Target object ip
- `object_port` (Number) Target object port for manual setting. (1 to 65535)
