---
page_title: "scp_redis Resource - scp"
subcategory: ""
description: |-
  Provides a Redis Database resource.
---

# Resource: scp_redis

Provides a Redis Database resource.


## Example Usage

```terraform
data "scp_region" "region" {
  filter {
    name = "location"
    values = ["KR-WEST-2"]
  }
}

data "scp_obs_storages" "obs_storage" {
  service_zone_id     = data.scp_region.region.id
  object_storage_name = "demo_object_storage_name"
}

data "scp_standard_image" "redis_7_2_0_image" {
  service_group = "DATABASE"
  service       = "Redis"
  region        = data.scp_region.region.location

  filter {
    name   = "image_name"
    values = ["Redis 7.2.0"]
  }
}

resource "scp_redis" "demo_db" {
  subnet_id = "SUBNET-123456789"
  security_group_ids = ["FIREWALL_SECURITY_GROUP-123456789", "FIREWALL_SECURITY_GROUP-987654321"]
  service_zone_id = data.scp_region.region.id

  image_id = data.scp_standard_image.redis_7_2_0_image.id
  contract_period = "1 Year"
  next_contract_period = "None"
  nat_enabled = true
  redis_name = "rediscluster"
  redis_state = "RUNNING"

  database_port = 6378
  database_user_password = ""

  encryption_enabled = true
  server_type = "redis1v1m2"
  timezone = "Asia/Seoul"

  redis_servers {
    redis_server_name = "demoredis-01"
    nat_public_ip_id = null
    server_role_type = "MASTER"
  }

  block_storages {
    block_storage_type = "SSD"
    block_storage_size = 50
  }

  backup  {
    object_storage_id = data.scp_obs_storages.obs_storage.contents[0].object_storage_id
    backup_retention_period = "15D"
    backup_start_hour = 7
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `block_storages` (Block List, Min: 1) block storage. (see [below for nested schema](#nestedblock--block_storages))
- `contract_period` (String) Contract (None|1 Year|3 Year)
- `database_port` (Number) Port number of database. (1024 to 65535)
- `database_user_password` (String, Sensitive) User account password of database.
- `encryption_enabled` (Boolean) Whether to use storage encryption.
- `image_id` (String) Redis virtual server image id.
- `redis_name` (String) Name of database cluster. (3 to 20 characters only)
- `redis_servers` (Block List, Min: 1) redis servers (HA configuration when entering two server specifications) (see [below for nested schema](#nestedblock--redis_servers))
- `redis_state` (String) redis state (RUNNING|STOPPED)
- `security_group_ids` (List of String) Security-Group ids of this redis DB. Each security-group must be a valid security-group resource which is attached to the VPC.
- `server_type` (String) Server type
- `service_zone_id` (String) Service Zone Id
- `subnet_id` (String) Subnet id of this database server. Subnet must be a valid subnet resource which is attached to the VPC.
- `timezone` (String) Timezone setting of this database.

### Optional

- `backup` (Block Set, Max: 1) (see [below for nested schema](#nestedblock--backup))
- `nat_enabled` (Boolean) Whether to use nat.
- `next_contract_period` (String) Next contract (None|1 Year|3 Year)
- `redis_sentinel_server` (Block Set) redis sentinel servers (see [below for nested schema](#nestedblock--redis_sentinel_server))
- `tags` (Map of String)
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `id` (String) The ID of this resource.
- `vpc_id` (String) vpc id

<a id="nestedblock--block_storages"></a>
### Nested Schema for `block_storages`

Required:

- `block_storage_size` (Number) Block Storage Size (10 to 5120)
- `block_storage_type` (String) Storage product name. (SSD|HDD)

Read-Only:

- `block_storage_group_id` (String) Block storage group id


<a id="nestedblock--redis_servers"></a>
### Nested Schema for `redis_servers`

Required:

- `redis_server_name` (String) Redis database server names. (3 to 20 lowercase and number with dash and the first character should be an lowercase letter.)
- `server_role_type` (String) Server role type Enter 'ACTIVE' for a single server configuration. (MASTER | REPLICA)

Optional:

- `nat_public_ip_id` (String) Public IP for NAT. If it is null, it is automatically allocated.

Read-Only:

- `nat_public_ip_address` (String) nat ip address


<a id="nestedblock--backup"></a>
### Nested Schema for `backup`

Required:

- `backup_retention_period` (String) Backup File Retention Day.(7D <= day <= 35D)
- `backup_start_hour` (Number) The time at which the backup starts. (from 0 to 23)

Optional:

- `object_storage_id` (String) Object storage ID where backup files will be stored.


<a id="nestedblock--redis_sentinel_server"></a>
### Nested Schema for `redis_sentinel_server`

Required:

- `sentinel_port` (Number) Server role type Enter 'ACTIVE' for a single server configuration. (ACTIVE | STANDBY)
- `sentinel_server_name` (String) Redis database server names. (3 to 20 lowercase and number with dash and the first character should be an lowercase letter.)

Optional:

- `sentinel_nat_public_ip_id` (String) ublic IP for NAT. If it is null, it is automatically allocated.

Read-Only:

- `nat_public_ip_address` (String) nat ip address


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `update` (String)
